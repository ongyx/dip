"use strict";(()=>{var k=Object.create;var p=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var w=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var T=(t,n,s,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of C(n))!x.call(t,e)&&e!==s&&p(t,e,{get:()=>n[e],enumerable:!(a=v(n,e))||a.enumerable});return t};var E=(t,n,s)=>(s=t!=null?k(S(t)):{},T(n||!t||!t.__esModule?p(s,"default",{value:t,enumerable:!0}):s,t));var b=w((f,d)=>{(function(t,n){"use strict";typeof define=="function"&&define.amd?define([],function(){return t.Snackbar=n()}):typeof d=="object"&&d.exports?d.exports=t.Snackbar=n():t.Snackbar=n()})(f,function(){var t={};t.current=null;var n={text:"Default Text",textColor:"#FFFFFF",width:"auto",showAction:!0,actionText:"Dismiss",actionTextAria:"Dismiss, Description for Screen Readers",alertScreenReader:!1,actionTextColor:"#4CAF50",showSecondButton:!1,secondButtonText:"",secondButtonAria:"Description for Screen Readers",secondButtonTextColor:"#4CAF50",backgroundColor:"#323232",pos:"bottom-left",duration:5e3,customClass:"",onActionClick:function(a){a.style.opacity=0},onSecondButtonClick:function(a){},onClose:function(a){}};t.show=function(a){var e=s(!0,n,a);t.current&&(t.current.style.opacity=0,setTimeout(function(){var r=this.parentElement;r&&r.removeChild(this)}.bind(t.current),500)),t.snackbar=document.createElement("div"),t.snackbar.className="snackbar-container "+e.customClass,t.snackbar.style.width=e.width;var o=document.createElement("p");if(o.style.margin=0,o.style.padding=0,o.style.color=e.textColor,o.style.fontSize="14px",o.style.fontWeight=300,o.style.lineHeight="1em",o.innerHTML=e.text,t.snackbar.appendChild(o),t.snackbar.style.background=e.backgroundColor,e.showSecondButton){var i=document.createElement("button");i.className="action",i.innerHTML=e.secondButtonText,i.setAttribute("aria-label",e.secondButtonAria),i.style.color=e.secondButtonTextColor,i.addEventListener("click",function(){e.onSecondButtonClick(t.snackbar)}),t.snackbar.appendChild(i)}if(e.showAction){var c=document.createElement("button");c.className="action",c.innerHTML=e.actionText,c.setAttribute("aria-label",e.actionTextAria),c.style.color=e.actionTextColor,c.addEventListener("click",function(){e.onActionClick(t.snackbar)}),t.snackbar.appendChild(c)}e.duration&&setTimeout(function(){t.current===this&&(t.current.style.opacity=0,t.current.style.top="-100px",t.current.style.bottom="-100px")}.bind(t.snackbar),e.duration),e.alertScreenReader&&t.snackbar.setAttribute("role","alert"),t.snackbar.addEventListener("transitionend",function(r,A){r.propertyName==="opacity"&&this.style.opacity==="0"&&(typeof e.onClose=="function"&&e.onClose(this),this.parentElement.removeChild(this),t.current===this&&(t.current=null))}.bind(t.snackbar)),t.current=t.snackbar,document.body.appendChild(t.snackbar);var m=getComputedStyle(t.snackbar).bottom,l=getComputedStyle(t.snackbar).top;t.snackbar.style.opacity=1,t.snackbar.className="snackbar-container "+e.customClass+" snackbar-pos "+e.pos},t.close=function(){t.current&&(t.current.style.opacity=0)};var s=function(){var a={},e=!1,o=0,i=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],o++);for(var c=function(l){for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e&&Object.prototype.toString.call(l[r])==="[object Object]"?a[r]=s(!0,a[r],l[r]):a[r]=l[r])};o<i;o++){var m=arguments[o];c(m)}return a};return t})});var y=E(b());var h=t=>JSON.parse(t);var u=class{constructor(n){this.listen=()=>{this.source.onopen=this.onopen,this.source.onerror=this.onerror,this.source.addEventListener(this.metadata.path.document,this.onmessage)};this.onopen=()=>{this.notify("Connection established!")};this.onerror=()=>{this.notify("Failed to connect to server.")};this.onmessage=n=>{let s=h(n.data),a=new Date(s.timestamp*1e3);this.notify(`${this.metadata.path.document} reloaded at ${a.toLocaleTimeString()}`),this.content.innerHTML=s.content};this.metadata=n,this.source=new EventSource(`${n.path.asset}/events`),this.content=document.querySelector("#content")}notify(n){y.default.show({text:n,actionTextColor:"#FFF8E7"})}};var g=()=>{let t=document.querySelector("script[id=metadata]").textContent;return t!==null?JSON.parse(t):null};var M=()=>{let t=g();if(t===null){console.log("error: failed to read document metadata");return}console.log("connecting to SSE...");let n=new u(t);console.log("SSE connected!"),n.listen()};window.onload=M;})();
/*! Bundled license information:

node-snackbar/src/js/snackbar.js:
  (*!
   * Snackbar v0.1.14
   * http://polonel.com/Snackbar
   *
   * Copyright 2018 Chris Brame and other contributors
   * Released under the MIT license
   * https://github.com/polonel/Snackbar/blob/master/LICENSE
   *)
*/
